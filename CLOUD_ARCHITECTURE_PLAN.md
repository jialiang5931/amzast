# AMZAST 云端化架构规划方案 (Final Architecture)

## 1. 总体架构 (The Tech Stack)
这个“三剑客”组合是目前性价比最高、开发最快的 SaaS 指标配置：

| 组件 | 服务商 | 职责 | 理由 |
| :--- | :--- | :--- | :--- |
| **前端 (Frontend)** | **Zeabur** | 托管 React 网页 | 部署极其简单，对亚洲线路有优化。 |
| **后端+数据库 (BaaS)** | **Supabase** | 存储广告数据 + 运行同步逻辑 | 自带 Edge Functions (后端逻辑运行环境)。 |
| **素材转存 (Storage)** | **Cloudflare R2** | 存广告图片/视频 | **0 流量费 (Zero Egress)**，这是省钱的核心。 |

---

## 2. 中国用户访问分析 (China Accessibility)

> [!IMPORTANT]
> **结论：完全可用，但一定要“购买并绑定自定义域名”。**

*   **Zeabur**: 它们的边缘节点在亚洲（香港/日本/新加坡）表现不错。
*   **域名建议**: 务必绑定自己的 `.com` 或 `.net` 域名。因为默认的 `.zeabur.app` 或 `.supabase.co` 很容易被墙或访问缓慢。
*   **Supabase**: 数据库和 API 通讯一般没问题，延迟在 200ms 左右，对于“查数据”这种非实时竞技类应用完全可以接受。
*   **Cloudflare R2**: Cloudflare 的全球 CDN 是行业标杆。通过其全球节点（即便没有国内节点）中转到大陆的速度也非常快。

---

## 3. 费用评估 (Cost Estimate)

> [!TIP]
> **结论：初期几乎 $0，开始赚钱后约 $5-$30/月。**

1.  **Zeabur**: 
    *   **开发期**: $0 (Free Tier)。
    *   **上线后**: 推荐购买 $5/月的 Developer 方案（防睡眠，访问快，适合正式运营）。
2.  **Supabase**:
    *   **500MB 数据库内**: $0 (Free Tier)。由于我们只存文字和链接，这能存数万条广告。
    *   **超出后**: $25/月 (Pro)。
3.  **Cloudflare R2**: 
    *   **存储费用**: 前 10GB 免费，超出后极便宜。
    *   **流量费用**: **$0**。这是该方案最牛的地方。
4.  **Apify (真正的大头)**:
    *   这是您的“原材料”成本。取决于您同步多少次、同步多深的数据。建议按需购买其付费额度。

---

## 4. 实施流程建议

1.  **素材转存逻辑**: 
    *   Meta 原始图片链接 24 小时失效 -> Supabase 后端检测到新广告 -> 自动下载并上传至 R2 -> 数据库存 R2 的永久链接。
2.  **安全防护**: 
    *   所有 Key 严禁暴露在前端。利用 Zeabur 和 Supabase 的环境变量功能进行加密存储。
